include 'emu8086.inc'          ; EMU8086 ????????? ???????????
org 100h                       ; ????????? ???? ?????? 100h
jmp start                     ; ?????? start ?????? ???

arr db 20 dup(?)               ; ?? ??????? ???? ??????
occ db 20 dup(0)               ; occurrence ???? ????? ????

start:
print "How many numbers: "     ; ?? ?????? ???? ????
call scan_num                  ; ?????? ????? ??? (CX ?? ?????)
mov bx, cx                    ; n = BX
mov si, 0                     ; ??????? ? ??? ???
mov di, 0                     ; arr ??????? ? ??? ???

printn
print "Enter the numbers: "    ; ?????????? ????? ???? ????
printn

input_loop:
call scan_num                 ; ?? ???? ?????? ????? ?????? (CL ??)
mov arr[di], cl              ; arr[di] ?? ??????
mov occ[di], 0               ; occ[di] ????? ???

; ????? ????? ???? ???? ?????? ??????? ???
mov al, cl
cbw
mov ax, ax
call print_num
printn

inc di
inc si
dec bx
jnz input_loop

mov cx, si                   ; ??? ????? ?????? CX ??
mov si, 0                    ; ?????? ????? ??????? ? ??? ???

outer_loop:
mov di, si
mov al, arr[si]
cmp occ[si], 0              ; ???? ???? ????? ?? ?? ??? ???
jne skip_outer

mov bx, 1                   ; ?????? ???? ? ???? (?????? ???? ????)

inner_loop:
inc di
cmp di, cx
jge save_result

mov ah, arr[di]
cmp ah, al
jne inner_loop
inc bx
mov occ[di], 255            ; 255 ???? ????? ???, ???? ???? ???? ?????
jmp inner_loop

save_result:
mov occ[si], bl             ; ?????? ????

skip_outer:
inc si
cmp si, cx
jl outer_loop

; ????????? ??? ????

mov si, 0

print_loop:
cmp occ[si], 0
je skip_print
cmp occ[si], 255
je skip_print

mov al, arr[si]
cbw
mov ax, ax
call print_num              ; ?????? ??????? ???
print " : "
mov al, occ[si]
cbw
mov ax, ax
call print_num              ; ?????? ??????? ???
printn

skip_print:
inc si
cmp si, cx
jl print_loop

mov ah, 4ch                 ; ????????? ??? ???? ????
int 21h

DEFINE_SCAN_NUM
DEFINE_PRINT_NUM
DEFINE_PRINT_NUM_UNS
end start
