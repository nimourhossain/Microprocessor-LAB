include 'emu8086.inc'       ; EMU8086 লাইব্রেরি ইনক্লুড করা
org 100h                   ; প্রোগ্রাম শুরু ঠিকানা 100h

jmp start                  ; সরাসরি start লেবেলে যাবে

buf db 21 dup(0)           ; ২১ বাইটের একটি বাফার তৈরি, ইনপুট স্ট্রিং রাখার জন্য

start:
    printn "Enter string (max 20):" ; ইউজারকে স্ট্রিং ইনপুট দিতে বলবে (সর্বোচ্চ ২০ ক্যারেক্টার)
    lea di, buf            ; DI-তে বাফারের ঠিকানা লোড করলো
    mov dx, 20             ; DX-এ ইনপুটের সর্বোচ্চ দৈর্ঘ্য ২০ সেট করলো
    call get_string        ; ইউজার ইনপুট নেবে এবং buf-এ সেভ করবে

    lea si, buf            ; SI-তে বাফারের ঠিকানা লোড করলো (স্ট্রিং পড়ার জন্য)

convert_loop:
    mov al, [si]           ; স্ট্রিং থেকে একটি ক্যারেক্টার AL-এ নিলো
    cmp al, 0              ; যদি ক্যারেক্টার শূন্য (স্ট্রিং শেষের মার্কার) হয়
    je done                ; তাহলে লুপ শেষ করবে

                                                                         ; যদি ক্যারেক্টার বড় হাতের A থেকে Z এর মধ্যে হয়, তাহলে ছোট হাতের করে দিবে
    cmp al, 'A'            ; AL বড় হাতের A এর থেকে ছোট কিনা চেক
    jb skip                ; ছোট হলে skip করবে
    cmp al, 'Z'            ; AL বড় হাতের Z এর থেকে বড় কিনা চেক
    ja skip                ; বড় হলে skip করবে
    add al, 20h            ; AL এ ২০h যোগ করে ছোট হাতের ক্যারেক্টারে রূপান্তর করবে
    mov [si], al           ; নতুন ছোট হাতের ক্যারেক্টার আবার স্ট্রিং-এ রাখবে

skip:
    inc si                 ; SI এক ধাপ এগাবে (পরবর্তী ক্যারেক্টারে যাবে)
    jmp convert_loop       ; লুপের শুরুতে ফিরে যাবে

done:
    printn "Lowercase string: " ; ছোট হাতের স্ট্রিং প্রদর্শনের জন্য লেখা দেখাবে
    lea si, buf            ; SI-তে বাফারের ঠিকানা লোড করবে
    call print_string      ; স্ট্রিং প্রিন্ট করবে

    mov ah, 4Ch            ; প্রোগ্রাম শেষ করার DOS ইন্টারাপ্ট
    int 21h

DEFINE_GET_STRING          ; ইনপুট নেওয়ার ফাংশন সংজ্ঞা
DEFINE_PRINT_STRING        ; স্ট্রিং প্রিন্টের ফাংশন সংজ্ঞা

end
